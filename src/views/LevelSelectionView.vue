<script setup lang="ts">
import { ref } from 'vue';
import { useRouter } from 'vue-router';

const router = useRouter();

const goToAbout = () => {
  router.push({ path: '/', hash: '#about' }).then(() => {
    setTimeout(() => {
      const aboutSection = document.getElementById('about');
      if (aboutSection) {
        aboutSection.scrollIntoView({ behavior: 'smooth' });
      }
    }, 100);
  });
};

// ãƒ¬ãƒ™ãƒ«åˆ¥ã®æ•™æãƒ‡ãƒ¼ã‚¿
const materials = ref({
  level3: [
    {
      id: 1,
      title: 'è²¡å‹™è«¸è¡¨ã®åŸºç¤',
      description: 'è²¸å€Ÿå¯¾ç…§è¡¨ã¨æç›Šè¨ˆç®—æ›¸ã®åŸºæœ¬çš„ãªèª­ã¿æ–¹ã‚’å­¦ã³ã¾ã™',
      questions: 50,
      estimatedTime: '2æ™‚é–“',
      difficulty: 'åŸºç¤',
      completed: false,
    },
    {
      id: 2,
      title: 'ä¼šè¨ˆç”¨èªé›†',
      description: 'ãƒ“ã‚¸ãƒã‚¹ä¼šè¨ˆæ¤œå®š3ç´šã§å¿…è¦ãªåŸºæœ¬çš„ãªä¼šè¨ˆç”¨èªã‚’å­¦ç¿’ã—ã¾ã™',
      questions: 100,
      estimatedTime: '3æ™‚é–“',
      difficulty: 'åŸºç¤',
      completed: false,
    },
    {
      id: 3,
      title: 'è²¡å‹™è«¸è¡¨ã®æ§‹é€ ',
      description: 'è²¡å‹™è«¸è¡¨ã®å„é …ç›®ã®æ„å‘³ã¨æ§‹é€ ã‚’è©³ã—ãè§£èª¬ã—ã¾ã™',
      questions: 60,
      estimatedTime: '2.5æ™‚é–“',
      difficulty: 'åŸºç¤',
      completed: false,
    },
  ],
  level2: [
    {
      id: 4,
      title: 'è²¡å‹™æ¯”ç‡åˆ†æ',
      description: 'æµå‹•æ¯”ç‡ã€è‡ªå·±è³‡æœ¬æ¯”ç‡ãªã©ã€é‡è¦ãªè²¡å‹™æ¯”ç‡ã‚’å­¦ç¿’ã—ã¾ã™',
      questions: 80,
      estimatedTime: '4æ™‚é–“',
      difficulty: 'ä¸­ç´š',
      completed: false,
    },
    {
      id: 5,
      title: 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼åˆ†æ',
      description: 'ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ãƒ­ãƒ¼è¨ˆç®—æ›¸ã®èª­ã¿æ–¹ã¨åˆ†ææ–¹æ³•ã‚’ç¿’å¾—ã—ã¾ã™',
      questions: 70,
      estimatedTime: '3.5æ™‚é–“',
      difficulty: 'ä¸­ç´š',
      completed: false,
    },
    {
      id: 6,
      title: 'çµŒå–¶åˆ†æã®å®Ÿè·µ',
      description: 'å®Ÿéš›ã®ä¼æ¥­ã®è²¡å‹™è«¸è¡¨ã‚’ä½¿ã£ãŸçµŒå–¶åˆ†æã®å®Ÿè·µå•é¡Œã§ã™',
      questions: 90,
      estimatedTime: '5æ™‚é–“',
      difficulty: 'ä¸­ç´š',
      completed: false,
    },
  ],
  level1: [
    {
      id: 7,
      title: 'é€£çµè²¡å‹™è«¸è¡¨ã®åˆ†æ',
      description: 'é€£çµè²¡å‹™è«¸è¡¨ã®æ§‹é€ ã¨åˆ†ææ‰‹æ³•ã‚’å­¦ç¿’ã—ã¾ã™',
      questions: 100,
      estimatedTime: '6æ™‚é–“',
      difficulty: 'ä¸Šç´š',
      completed: false,
    },
    {
      id: 8,
      title: 'ä¼æ¥­ä¾¡å€¤è©•ä¾¡',
      description: 'DCFæ³•ãªã©ã€ä¼æ¥­ä¾¡å€¤ã‚’è©•ä¾¡ã™ã‚‹æ‰‹æ³•ã‚’å­¦ã³ã¾ã™',
      questions: 120,
      estimatedTime: '8æ™‚é–“',
      difficulty: 'ä¸Šç´š',
      completed: false,
    },
    {
      id: 9,
      title: 'çµŒå–¶æˆ¦ç•¥ã®ç«‹æ¡ˆ',
      description: 'è²¡å‹™åˆ†æã‚’åŸºã«ã—ãŸçµŒå–¶æˆ¦ç•¥ã®ç«‹æ¡ˆæ–¹æ³•ã‚’å­¦ç¿’ã—ã¾ã™',
      questions: 110,
      estimatedTime: '7æ™‚é–“',
      difficulty: 'ä¸Šç´š',
      completed: false,
    },
  ],
});

const selectedLevel = ref<'level3' | 'level2' | 'level1'>('level3');

const selectLevel = (level: 'level3' | 'level2' | 'level1') => {
  selectedLevel.value = level;
};

const startMaterial = (materialId: number) => {
  // è²¡å‹™è«¸è¡¨ã®åŸºç¤ï¼ˆmaterialId: 1ï¼‰ã¨ä¼šè¨ˆç”¨èªé›†ï¼ˆmaterialId: 2ï¼‰ã®å ´åˆã¯å•é¡Œãƒšãƒ¼ã‚¸ã«é·ç§»
  if (materialId === 1 || materialId === 2) {
    router.push(`/question/${materialId}`);
  } else {
    // ãã®ä»–ã®æ•™æã¯ä»Šå¾Œå®Ÿè£…
    console.log('æ•™æã‚’é–‹å§‹:', materialId);
  }
};

const getLevelLabel = (level: 'level3' | 'level2' | 'level1') => {
  const labels = {
    level3: '3ç´š',
    level2: '2ç´š',
    level1: '1ç´š',
  };
  return labels[level];
};

const getLevelDescription = (level: 'level3' | 'level2' | 'level1') => {
  const descriptions = {
    level3: 'è²¡å‹™è«¸è¡¨ã®åŸºæœ¬çš„ãªèª­ã¿æ–¹ã¨ä¼šè¨ˆã®åŸºç¤çŸ¥è­˜ã‚’ç¿’å¾—ã—ã¾ã™',
    level2: 'è²¡å‹™è«¸è¡¨ã®åˆ†æã¨çµŒå–¶åˆ¤æ–­ã«å¿…è¦ãªçŸ¥è­˜ã‚’ç¿’å¾—ã—ã¾ã™',
    level1: 'é«˜åº¦ãªè²¡å‹™åˆ†æã¨çµŒå–¶æˆ¦ç•¥ç«‹æ¡ˆã«å¿…è¦ãªçŸ¥è­˜ã‚’ç¿’å¾—ã—ã¾ã™',
  };
  return descriptions[level];
};
</script>

<template>
  <div class="level-selection-container">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="header">
      <div class="header-container">
        <h1 class="logo" @click="router.push('/')">ç‰¹æ€¥ãƒ“ã‚¸ãƒã‚¹ä¼šè¨ˆ</h1>
        <nav class="nav">
          <router-link to="/" class="nav-link">ãƒ›ãƒ¼ãƒ </router-link>
          <router-link to="/levels" class="nav-link active">å•é¡Œé›†</router-link>
          <a href="#about" class="nav-link" @click.prevent="goToAbout">æ¤œå®šã«ã¤ã„ã¦</a>
          <router-link to="/contact" class="nav-link">ãŠå•ã„åˆã‚ã›</router-link>
        </nav>
      </div>
    </header>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="main-content">
      <div class="container">
        <!-- ãƒšãƒ¼ã‚¸ã‚¿ã‚¤ãƒˆãƒ« -->
        <div class="page-header">
          <h2 class="page-title">æ•™æã‚’é¸ã¶</h2>
          <p class="page-description">
            ãƒ“ã‚¸ãƒã‚¹ä¼šè¨ˆæ¤œå®šã®ãƒ¬ãƒ™ãƒ«ã«åˆã‚ã›ã¦ã€æœ€é©ãªæ•™æã‚’é¸æŠã—ã¦ãã ã•ã„
          </p>
        </div>

        <!-- ãƒ¬ãƒ™ãƒ«é¸æŠã‚¿ãƒ– -->
        <div class="level-tabs">
          <button
            :class="['tab-button', { active: selectedLevel === 'level3' }]"
            @click="selectLevel('level3')"
          >
            <span class="tab-badge level3">3ç´š</span>
            <span class="tab-label">åŸºç¤ãƒ¬ãƒ™ãƒ«</span>
          </button>
          <button
            :class="['tab-button', { active: selectedLevel === 'level2' }]"
            @click="selectLevel('level2')"
          >
            <span class="tab-badge level2">2ç´š</span>
            <span class="tab-label">å®Ÿå‹™ãƒ¬ãƒ™ãƒ«</span>
          </button>
          <button
            :class="['tab-button', { active: selectedLevel === 'level1' }]"
            @click="selectLevel('level1')"
          >
            <span class="tab-badge level1">1ç´š</span>
            <span class="tab-label">ä¸Šç´šãƒ¬ãƒ™ãƒ«</span>
          </button>
        </div>

        <!-- ãƒ¬ãƒ™ãƒ«èª¬æ˜ -->
        <div class="level-description">
          <p>{{ getLevelDescription(selectedLevel) }}</p>
        </div>

        <!-- æ•™æä¸€è¦§ -->
        <div class="materials-grid">
          <div
            v-for="material in materials[selectedLevel]"
            :key="material.id"
            class="material-card"
          >
            <div class="material-header">
              <div class="material-badge" :class="material.difficulty">
                {{ material.difficulty }}
              </div>
              <h3 class="material-title">{{ material.title }}</h3>
            </div>
            <p class="material-description">{{ material.description }}</p>
            <div class="material-stats">
              <div class="stat-item">
                <span class="stat-icon">ğŸ“</span>
                <span class="stat-text">{{ material.questions }}å•</span>
              </div>
              <div class="stat-item">
                <span class="stat-icon">â±ï¸</span>
                <span class="stat-text">{{ material.estimatedTime }}</span>
              </div>
            </div>
            <button
              class="btn btn-primary btn-full"
              @click="startMaterial(material.id)"
            >
              å­¦ç¿’ã‚’å§‹ã‚ã‚‹
            </button>
          </div>
        </div>
      </div>
    </main>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="footer">
      <div class="container">
        <p class="footer-text">&copy; 2024 ç‰¹æ€¥ãƒ“ã‚¸ãƒã‚¹ä¼šè¨ˆ. All rights reserved.</p>
      </div>
    </footer>
  </div>
</template>

<style scoped>
.level-selection-container {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  background-color: #f9fafb;
}

/* ãƒ˜ãƒƒãƒ€ãƒ¼ */
.header {
  background-color: #fff;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
  position: sticky;
  top: 0;
  z-index: 100;
}

.header-container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo {
  font-size: 1.5rem;
  font-weight: 700;
  color: #2563eb;
  margin: 0;
  cursor: pointer;
  transition: color 0.2s;
}

.logo:hover {
  color: #1d4ed8;
}

.nav {
  display: flex;
  gap: 2rem;
}

.nav-link {
  color: #374151;
  text-decoration: none;
  font-weight: 500;
  transition: color 0.2s;
  font-size: 1rem;
}

.nav-link:hover {
  color: #2563eb;
}

.nav-link.active,
.nav-link.router-link-active {
  color: #2563eb;
  font-weight: 600;
}

/* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */
.main-content {
  flex: 1;
  padding: 3rem 0;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 2rem;
}

/* ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ */
.page-header {
  text-align: center;
  margin-bottom: 3rem;
}

.page-title {
  font-size: 2.5rem;
  font-weight: 700;
  color: #1f2937;
  margin: 0 0 1rem 0;
}

.page-description {
  font-size: 1.125rem;
  color: #6b7280;
  margin: 0;
}

/* ãƒ¬ãƒ™ãƒ«é¸æŠã‚¿ãƒ– */
.level-tabs {
  display: flex;
  gap: 1rem;
  justify-content: center;
  margin-bottom: 2rem;
  flex-wrap: wrap;
}

.tab-button {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 0.5rem;
  padding: 1.5rem 2rem;
  background: white;
  border: 2px solid #e5e7eb;
  border-radius: 12px;
  cursor: pointer;
  transition: all 0.2s;
  min-width: 150px;
}

.tab-button:hover {
  border-color: #2563eb;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.1);
}

.tab-button.active {
  border-color: #2563eb;
  background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
}

.tab-badge {
  display: inline-block;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  font-weight: 600;
  font-size: 1.125rem;
  color: white;
}

.tab-badge.level3 {
  background-color: #10b981;
}

.tab-badge.level2 {
  background-color: #2563eb;
}

.tab-badge.level1 {
  background-color: #8b5cf6;
}

.tab-label {
  font-size: 0.875rem;
  color: #6b7280;
  font-weight: 500;
}

.tab-button.active .tab-label {
  color: #2563eb;
  font-weight: 600;
}

/* ãƒ¬ãƒ™ãƒ«èª¬æ˜ */
.level-description {
  text-align: center;
  margin-bottom: 3rem;
  padding: 1rem;
  background: white;
  border-radius: 8px;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
}

.level-description p {
  margin: 0;
  color: #6b7280;
  font-size: 1rem;
}

/* æ•™æã‚°ãƒªãƒƒãƒ‰ */
.materials-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
  gap: 2rem;
  margin-bottom: 3rem;
}

.material-card {
  background: white;
  border-radius: 12px;
  padding: 2rem;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  transition: transform 0.2s, box-shadow 0.2s;
  display: flex;
  flex-direction: column;
}

.material-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 16px rgba(0, 0, 0, 0.15);
}

.material-header {
  margin-bottom: 1rem;
}

.material-badge {
  display: inline-block;
  padding: 0.25rem 0.75rem;
  border-radius: 4px;
  font-size: 0.75rem;
  font-weight: 600;
  margin-bottom: 0.75rem;
}

.material-badge.åŸºç¤ {
  background-color: #d1fae5;
  color: #065f46;
}

.material-badge.ä¸­ç´š {
  background-color: #dbeafe;
  color: #1e40af;
}

.material-badge.ä¸Šç´š {
  background-color: #ede9fe;
  color: #5b21b6;
}

.material-title {
  font-size: 1.5rem;
  font-weight: 600;
  color: #1f2937;
  margin: 0;
}

.material-description {
  color: #6b7280;
  line-height: 1.6;
  margin-bottom: 1.5rem;
  flex: 1;
}

.material-stats {
  display: flex;
  gap: 1.5rem;
  margin-bottom: 1.5rem;
  padding: 1rem;
  background-color: #f9fafb;
  border-radius: 8px;
}

.stat-item {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.stat-icon {
  font-size: 1.25rem;
}

.stat-text {
  color: #374151;
  font-weight: 500;
  font-size: 0.875rem;
}

/* ãƒœã‚¿ãƒ³ */
.btn {
  padding: 0.75rem 2rem;
  border-radius: 8px;
  font-size: 1rem;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.2s;
  border: none;
  font-family: inherit;
}

.btn-primary {
  background-color: #2563eb;
  color: white;
}

.btn-primary:hover {
  background-color: #1d4ed8;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(37, 99, 235, 0.4);
}

.btn-full {
  width: 100%;
}

/* ãƒ•ãƒƒã‚¿ãƒ¼ */
.footer {
  background-color: #1f2937;
  color: white;
  padding: 2rem 0;
  text-align: center;
  margin-top: auto;
}

.footer-text {
  margin: 0;
  color: #9ca3af;
}

/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
@media (max-width: 768px) {
  .page-title {
    font-size: 2rem;
  }

  .level-tabs {
    flex-direction: column;
  }

  .tab-button {
    width: 100%;
  }

  .materials-grid {
    grid-template-columns: 1fr;
  }

  .header-container {
    flex-direction: column;
    gap: 1rem;
  }

  .nav {
    flex-wrap: wrap;
    justify-content: center;
    width: 100%;
  }
}
</style>



